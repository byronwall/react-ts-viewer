---
description: 
globs: 
alwaysApply: true
---
# Snapshot Update Guidelines

## Updating Test Snapshots

When test snapshots need to be updated after making code changes, use the correct command format:

### ✅ Correct Commands

**Update all snapshots:**
```bash
npm run test:once -- -u
```

**Update snapshots for specific test files:**
```bash
npm run test:once -- testFileName -u
npm run test:once -- cssAndScss -u
```

### ❌ Incorrect Commands

**These will fail:**
```bash
npm run test:once -- --update-snapshots  # Unknown option error
npm run test:once -- testFileName --update-snapshots
```

## When to Update Snapshots

- After making intentional changes to code that affects test output
- When parser logic changes that modify the structure of scope trees
- After fixing bugs that correct previously incorrect snapshot data

## Verification Process

1. Run tests first to see what's changed: `npm run test:once`
2. Review the diff to ensure changes are expected
3. Update snapshots: `npm run test:once -- -u`
4. Run tests again to confirm all pass: `npm run test:once`

## Project Context

This project uses [Vitest](mdc:https:/vitest.dev) as the test runner. The `-u` flag is the standard Vitest option for updating snapshots, while `--update-snapshots` is not a valid option.
